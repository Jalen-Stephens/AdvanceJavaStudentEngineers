spring.application.name=metadetect-service
spring.application.version=0.1.0
springdoc.api-docs.path=/api-docs
server.port=8080
logging.level.root=INFO

spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}

# Hikari defaults are fine; set a small pool for local dev
spring.datasource.hikari.maximum-pool-size=5

# Flyway runs automatically at startup
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true

# --- Security: validate Supabase JWTs via JWKS ---
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${SUPABASE_URL}/auth/v1/keys

# (Optional) Relax clock skew a bit if you see ?expired/nbf? edge cases during local testing
spring.security.oauth2.resourceserver.jwt.jws-algorithms=RS256

# Supabase auth proxy config (anon key, not service role)
metadetect.supabase.url=${SUPABASE_URL}
metadetect.supabase.anonKey=${SUPABASE_ANON_KEY}
metadetect.supabase.jwtSecret=${SUPABASE_JWT_SECRET}


